<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Polyfill Example</title>

</head>
<body>
    <script src="polyfill-rollup.js"></script>
    <script>
        window.addEventListener("load", loaded)

        function loaded() {

            console.log(window.navigation)

            const urlSpan = document.getElementById("url");

            window.navigation.addEventListener(
                "navigate",
                event => {
                    console.log("Navigate event", event)

                    // Intercept by default
                    event.intercept()

                    console.log(event.destination.url)
                    urlSpan.innerText = new URL(event.destination.url).pathname;
                }
            );

            if (window.navigation.currentEntry) {
                urlSpan.innerText = new URL(window.navigation.currentEntry.url).pathname;
            }

            console.log(window.navigation.currentEntry.url)


        }
    </script>

    <p>Current Url <span id="url"></span></p>

    <a href="/">Home Link</a>
    <a href="/some/page">Some Page Link</a>
    <a href="/some/other">Some Other Page Link</a>
</body>
</html>